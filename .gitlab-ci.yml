before_script:
    - git submodule init
    - git submodule update
    - cd ..
    - rm -rf src/gitlab.cs.fau.de/luksen/
    - mkdir -p src/gitlab.cs.fau.de/luksen/
    - cp -r obinex src/gitlab.cs.fau.de/luksen/
    - export GOPATH=$PWD
    - go get golang.org/x/net/websocket
    - go get golang.org/x/sys/unix

build:
    script:
        - go build gitlab.cs.fau.de/luksen/obinex/...

test:
    script:
        - go test gitlab.cs.fau.de/luksen/obinex/...

coverage:
    script:
        - cd src/gitlab.cs.fau.de/luksen/obinex
        - ./coverage.sh
        - mv coverage_*.html ../../../../obinex/
    artifacts:
        paths:
            - coverage_obinex-server.html
