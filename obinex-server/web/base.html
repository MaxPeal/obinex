<html>
<head>
	<meta charset="utf-8">
	<title>Obinex Log</title>

	<link rel="stylesheet" href="static/css/bootstrap.css" />

	<script type="text/javascript" charset="utf-8">

var ws = new WebSocket("ws://{{.Hostname}}:12334/logws");
ws.onmessage = function(evt) {
	var msg = JSON.parse(evt.data);
	if (msg.LogLine) {
		document.getElementById("log").innerHTML += msg.LogLine;
	}
	if (msg.Queue) {
		document.getElementById("queue").innerHTML = "";
		for (var i in msg.Queue) {
			document.getElementById("queue").innerHTML += "<li class='list-group-item'>" + msg.Queue[i] + "</li>\n";
		}
	}
	var warningBox = document.getElementById("warning-card")
	document.getElementById("warning-block").innerHTML = msg.Lock;
	if (msg.Lock) {
		warningBox.style.display = "block";
	} else {
		warningBox.style.display = "none";
	}
};

	</script>
</head>
<body>
	<div class="container">
		{{template "content" .}}
	</div>
</body>
</html>
